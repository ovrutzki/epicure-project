{"ast":null,"code":"import _slicedToArray from\"C:/Users/erana/Documents/gitHub.io/epicure-project/epicure/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef}from\"react\";import\"./DishesRender.css\";import FilterButtons from\"../../Buttons/FilterButtons/Buttons\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import Card from\"../../Card/Card\";import{dishTimeFilter,getDishesByRestId}from\"../../../store/slicer/dishesSlicer\";import DishModal from\"../../DishModal/DishModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DishesRender=function DishesRender(props){var specificDishes=useSelector(function(state){return state.dishes.specificDishes;});var filteredDishes=useSelector(function(state){return state.dishes.value;});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],setFilter=_useState2[1];var dispatch=useDispatch();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),dishId=_useState6[0],setDishId=_useState6[1];var dishModalRef=useRef();useEffect(function(){var handler=function handler(event){var _dishModalRef$current;if(!(dishModalRef!==null&&dishModalRef!==void 0&&(_dishModalRef$current=dishModalRef.current)!==null&&_dishModalRef$current!==void 0&&_dishModalRef$current.contains(event.target))){setIsOpen(false);}};document.addEventListener(\"mousedown\",handler);return function(){document.removeEventListener(\"mousedown\",handler);};});useEffect(function(){dispatch(getDishesByRestId(props.restName));},[]);useEffect(function(){dispatch(dishTimeFilter(filter));},[filter]);var filterEvent=function filterEvent(e){var target=e.target;setFilter(target.value);};var openModal=function openModal(id){setIsOpen(!isOpen);setDishId(id);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"main-dishes\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"filter-dish\",children:[/*#__PURE__*/_jsx(FilterButtons,{name:\"Breakfast\",onClick:filterEvent}),/*#__PURE__*/_jsx(FilterButtons,{name:\"Lunch\",onClick:filterEvent}),/*#__PURE__*/_jsx(FilterButtons,{name:\"Dinner\",onClick:filterEvent})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"dish-div\",children:filteredDishes===null||filteredDishes===void 0?void 0:filteredDishes.map(function(dish,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Card,{name:dish.name,img:dish.img,about:dish.about,price:dish.price,class:\"card\",onClick:function onClick(){return openModal(dish.id);},id:dish.id},index)});})}),isOpen&&/*#__PURE__*/_jsx(DishModal,{refProps:dishModalRef,onClose:openModal,open:isOpen,id:dishId,restaurantName:props.restName})]});};export default DishesRender;","map":{"version":3,"names":["React","useEffect","useRef","FilterButtons","useState","useDispatch","useSelector","Card","dishTimeFilter","getDishesByRestId","DishModal","DishesRender","props","specificDishes","state","dishes","filteredDishes","value","filter","setFilter","dispatch","isOpen","setIsOpen","dishId","setDishId","dishModalRef","handler","event","current","contains","target","document","addEventListener","removeEventListener","restName","filterEvent","e","openModal","id","map","dish","index","name","img","about","price"],"sources":["C:/Users/erana/Documents/gitHub.io/epicure-project/epicure/src/component/Restaurant/DishesRender/DishesRender.tsx"],"sourcesContent":["import React, { Dispatch, SetStateAction, useEffect, useRef } from \"react\";\r\nimport \"./DishesRender.css\";\r\nimport FilterButtons from \"../../Buttons/FilterButtons/Buttons\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { IRootState } from \"../../../store/store/store\";\r\nimport Card from \"../../Card/Card\";\r\nimport { ICard } from \"../../../interFaces/interFaces\";\r\nimport {\r\n  dishTimeFilter,\r\n  getDishesByRestId,\r\n} from \"../../../store/slicer/dishesSlicer\";\r\nimport DishModal from \"../../DishModal/DishModal\";\r\n\r\nexport interface IRestName {\r\n  sortFilter?: string;\r\n  restName?: string;\r\n}\r\n\r\nconst DishesRender: React.FC<IRestName> = (props: IRestName) => {\r\n  const specificDishes = useSelector(\r\n    (state: IRootState) => state.dishes.specificDishes\r\n  );\r\n  const filteredDishes = useSelector(\r\n    (state: IRootState) => state.dishes.value\r\n  );\r\n  const [filter, setFilter] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [dishId, setDishId]:[number | undefined,Dispatch<SetStateAction<number | undefined>>] = useState()\r\n  \r\n  let dishModalRef:any = useRef()\r\n    useEffect(()=>{\r\n        let handler = (event:any) =>{\r\n            if(!dishModalRef?.current?.contains(event.target)){\r\n              setIsOpen(false)\r\n            }\r\n        }\r\n        document.addEventListener(\"mousedown\",handler)\r\n\r\n        return () => {\r\n          document.removeEventListener(\"mousedown\",handler)\r\n        }\r\n    })\r\n\r\n  useEffect(() => {\r\n    dispatch(getDishesByRestId(props.restName));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    dispatch(dishTimeFilter(filter));\r\n  }, [filter]);\r\n\r\n  const filterEvent = (e: Event): void => {\r\n    const target = e.target as HTMLInputElement;\r\n    setFilter(target.value);\r\n  };\r\n  const openModal = (id:any):void => {\r\n    setIsOpen(!isOpen)\r\n    setDishId(id)\r\n  }\r\n  return (\r\n    <>\r\n      <div id=\"main-dishes\">\r\n        <div id=\"filter-dish\">\r\n          <FilterButtons name=\"Breakfast\" onClick={filterEvent} />\r\n          <FilterButtons name=\"Lunch\" onClick={filterEvent} />\r\n          <FilterButtons name=\"Dinner\" onClick={filterEvent} />\r\n        </div>\r\n      </div>\r\n      <div className=\"dish-div\" >\r\n        {filteredDishes?.map((dish: ICard, index: number) => (\r\n          <>\r\n          <Card\r\n            key={index}\r\n            name={dish.name}\r\n            img={dish.img}\r\n            about={dish.about}\r\n            price={dish.price}\r\n            class=\"card\"\r\n            onClick = {() => openModal(dish.id)}\r\n            id={dish.id}\r\n            />\r\n          </>\r\n          ))}\r\n      </div>\r\n          {isOpen && <DishModal refProps={dishModalRef} onClose={openModal} open={isOpen} id={dishId} restaurantName={props.restName}/>}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DishesRender;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}